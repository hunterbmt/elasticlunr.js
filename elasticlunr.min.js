/**
 * elasticlunr - http://weixsong.github.io
 * Lightweight full-text search engine in Javascript for browser search and offline search. - 0.8.9
 *
 * Copyright (C) 2016 Oliver Nightingale
 * Copyright (C) 2016 Wei Song
 * MIT Licensed
 * @license
 */
!function(){function e(e){if(null===e||"object"!=typeof e)return e;var t=e.constructor();for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}var t=function(e){var n=new t.Index;return n.pipeline.add(t.trimmer,t.stopWordFilter,t.stemmer),e&&e.call(n,n),n};t.version="0.8.9",t.utils={},t.utils.warn=function(e){return function(t){e.console&&console.warn&&console.warn(t)}}(this),t.utils.toString=function(e){return void 0===e||null===e?"":e.toString()},t.EventEmitter=function(){this.events={}},t.EventEmitter.prototype.addListener=function(){var e=Array.prototype.slice.call(arguments),t=e.pop(),n=e;if("function"!=typeof t)throw new TypeError("last argument must be a function");n.forEach(function(e){this.hasHandler(e)||(this.events[e]=[]),this.events[e].push(t)},this)},t.EventEmitter.prototype.removeListener=function(e,t){if(this.hasHandler(e)){var n=this.events[e].indexOf(t);-1!==n&&(this.events[e].splice(n,1),0==this.events[e].length&&delete this.events[e])}},t.EventEmitter.prototype.emit=function(e){if(this.hasHandler(e)){var t=Array.prototype.slice.call(arguments,1);this.events[e].forEach(function(e){e.apply(void 0,t)},this)}},t.EventEmitter.prototype.hasHandler=function(e){return e in this.events},t.tokenizer=function(e){if(!arguments.length||null===e||void 0===e)return[];if(Array.isArray(e)){var n=e.filter(function(e){return null===e||void 0===e?!1:!0});n=n.map(function(e){return t.utils.toString(e).toLowerCase()});var i=[];return n.forEach(function(e){var n=e.split(t.tokenizer.seperator);i=i.concat(n)},this),i}return e.toString().trim().toLowerCase().split(t.tokenizer.seperator)},t.tokenizer.defaultSeperator=/[\s\-]+/,t.tokenizer.seperator=t.tokenizer.defaultSeperator,t.tokenizer.setSeperator=function(e){null!==e&&void 0!==e&&"object"==typeof e&&(t.tokenizer.seperator=e)},t.tokenizer.resetSeperator=function(){t.tokenizer.seperator=t.tokenizer.defaultSeperator},t.tokenizer.getSeperator=function(){return t.tokenizer.seperator},t.Pipeline=function(){this._queue=[]},t.Pipeline.registeredFunctions={},t.Pipeline.registerFunction=function(e,n){n in t.Pipeline.registeredFunctions&&t.utils.warn("Overwriting existing registered function: "+n),e.label=n,t.Pipeline.registeredFunctions[n]=e},t.Pipeline.getRegisteredFunction=function(e){return e in t.Pipeline.registeredFunctions!=!0?null:t.Pipeline.registeredFunctions[e]},t.Pipeline.warnIfFunctionNotRegistered=function(e){var n=e.label&&e.label in this.registeredFunctions;n||t.utils.warn("Function is not registered with pipeline. This may cause problems when serialising the index.\n",e)},t.Pipeline.load=function(e){var n=new t.Pipeline;return e.forEach(function(e){var i=t.Pipeline.getRegisteredFunction(e);if(!i)throw new Error("Cannot load un-registered function: "+e);n.add(i)}),n},t.Pipeline.prototype.add=function(){var e=Array.prototype.slice.call(arguments);e.forEach(function(e){t.Pipeline.warnIfFunctionNotRegistered(e),this._queue.push(e)},this)},t.Pipeline.prototype.after=function(e,n){t.Pipeline.warnIfFunctionNotRegistered(n);var i=this._queue.indexOf(e);if(-1===i)throw new Error("Cannot find existingFn");this._queue.splice(i+1,0,n)},t.Pipeline.prototype.before=function(e,n){t.Pipeline.warnIfFunctionNotRegistered(n);var i=this._queue.indexOf(e);if(-1===i)throw new Error("Cannot find existingFn");this._queue.splice(i,0,n)},t.Pipeline.prototype.remove=function(e){var t=this._queue.indexOf(e);-1!==t&&this._queue.splice(t,1)},t.Pipeline.prototype.run=function(e){for(var t=[],n=e.length,i=this._queue.length,r=0;n>r;r++){for(var o=e[r],s=0;i>s&&(o=this._queue[s](o,r,e),void 0!==o&&null!==o);s++);void 0!==o&&null!==o&&t.push(o)}return t},t.Pipeline.prototype.reset=function(){this._queue=[]},t.Pipeline.prototype.get=function(){return this._queue},t.Pipeline.prototype.toJSON=function(){return this._queue.map(function(e){return t.Pipeline.warnIfFunctionNotRegistered(e),e.label})},t.FieldTokenizer=function(){this._tokenizer={}},t.FieldTokenizer.load=function(){return new t.FieldTokenizer},t.FieldTokenizer.prototype.tokenizer=function(e,n){var i=this.getFieldTokenizer(n);return i?tokernizer(e):t.tokenizer(e)},t.FieldTokenizer.prototype.getFieldTokenizer=function(e){var t=this._tokenizer[e];return t&&"function"==typeof t?t:void 0},t.FieldTokenizer.prototype.registerFieldTokenizer=function(e,n){var e=this.getFieldTokenizer(n);e&&t.utils.warn('Tokenizer for field "'+n+'" is already registered.\n',e),this._tokenizer[n]=e},t.FieldTokenizer.prototype.unregisterFieldTokenizer=function(e,t){this._tokenizer[t]=void 0},t.Index=function(){this._fields=[],this._ref="id",this.pipeline=new t.Pipeline,this.fieldTokenizer=new t.FieldTokenizer,this.documentStore=new t.DocumentStore,this.index={},this.eventEmitter=new t.EventEmitter,this._idfCache={},this.on("add","remove","update",function(){this._idfCache={}}.bind(this))},t.Index.prototype.on=function(){var e=Array.prototype.slice.call(arguments);return this.eventEmitter.addListener.apply(this.eventEmitter,e)},t.Index.prototype.off=function(e,t){return this.eventEmitter.removeListener(e,t)},t.Index.load=function(e){e.version!==t.version&&t.utils.warn("version mismatch: current "+t.version+" importing "+e.version);var n=new this;n._fields=e.fields,n._ref=e.ref,n.documentStore=t.DocumentStore.load(e.documentStore),n.pipeline=t.Pipeline.load(e.pipeline),n.fieldTokenizer=t.FieldTokenizer.load(e.fieldTokenizer),n.index={};for(var i in e.index)n.index[i]=t.InvertedIndex.load(e.index[i]);return n},t.Index.prototype.addField=function(e,n){return this._fields.push(e),this.index[e]=new t.InvertedIndex,n&&"function"==typeof n&&this.fieldTokenizer.registerFieldTokenizer(n,e),this},t.Index.prototype.setRef=function(e){return this._ref=e,this},t.Index.prototype.saveDocument=function(e){return this.documentStore=new t.DocumentStore(e),this},t.Index.prototype.addDoc=function(e,t){if(e){var t=void 0===t?!0:t,n=e[this._ref];this.documentStore.addDoc(n,e),this._fields.forEach(function(t){var i=this.pipeline.run(this.fieldTokenizer.tokenizer(e[t],t));this.documentStore.addFieldLength(n,t,i.length);var r={};i.forEach(function(e){e in r?r[e]+=1:r[e]=1},this);for(var o in r){var s=r[o];s=Math.sqrt(s),this.index[t].addToken(o,{ref:n,tf:s})}},this),t&&this.eventEmitter.emit("add",e,this)}},t.Index.prototype.removeDocByRef=function(e){if(e&&this.documentStore.isDocStored()!==!1&&this.documentStore.hasDoc(e)){var t=this.documentStore.getDoc(e);this.removeDoc(t,!1)}},t.Index.prototype.removeDoc=function(e,t){if(e){var t=void 0===t?!0:t,n=e[this._ref];this.documentStore.hasDoc(n)&&(this.documentStore.removeDoc(n),this._fields.forEach(function(t){var i=this.pipeline.run(this.fieldTokenizer.tokenizer(e[t],t));i.forEach(function(e){this.index[t].removeToken(e,n)},this)},this),t&&this.eventEmitter.emit("remove",e,this))}},t.Index.prototype.updateDoc=function(e,t){var t=void 0===t?!0:t;this.removeDocByRef(e[this._ref],!1),this.addDoc(e,!1),t&&this.eventEmitter.emit("update",e,this)},t.Index.prototype.idf=function(e,t){var n="@"+t+"/"+e;if(Object.prototype.hasOwnProperty.call(this._idfCache,n))return this._idfCache[n];var i=this.index[t].getDocFreq(e),r=1+Math.log(this.documentStore.length/(i+1));return this._idfCache[n]=r,r},t.Index.prototype.getFields=function(){return this._fields.slice()},t.Index.prototype.search=function(e,n){if(!e)return[];var i=null;null!=n&&(i=JSON.stringify(n));var r=new t.Configuration(i,this.getFields()).get(),o=this.pipeline.run(t.tokenizer(e)),s={};for(var d in r){var u=this.fieldSearch(o,d,r),a=r[d].boost;for(var c in u)u[c]=u[c]*a;for(var c in u)c in s?s[c]+=u[c]:s[c]=u[c]}var l=[];for(var c in s)l.push({ref:c,score:s[c]});return l.sort(function(e,t){return t.score-e.score}),l},t.Index.prototype.fieldSearch=function(e,t,n){var i=n[t].bool,r=n[t].expand,o=null,s={};return e.forEach(function(e){var n=[e];1==r&&(n=this.index[t].expandToken(e));var d={};n.forEach(function(n){var r=this.index[t].getDocs(n),u=this.idf(n,t);if(o&&"AND"==i){var a={};for(var c in o)c in r&&(a[c]=r[c]);r=a}n==e&&this.fieldSearchStats(s,n,r);for(var c in r){var l=this.index[t].getTermFrequency(n,c),h=this.documentStore.getFieldLength(c,t),f=1;0!=h&&(f=1/Math.sqrt(h));var p=1;n!=e&&(p=.15*(1-(n.length-e.length)/n.length));var v=l*u*f*p;c in d?d[c]+=v:d[c]=v}},this),o=this.mergeScores(o,d,i)},this),o=this.coordNorm(o,s,e.length)},t.Index.prototype.mergeScores=function(e,t,n){if(!e)return t;if("AND"==n){var i={};for(var r in t)r in e&&(i[r]=e[r]+t[r]);return i}for(var r in t)r in e?e[r]+=t[r]:e[r]=t[r];return e},t.Index.prototype.fieldSearchStats=function(e,t,n){for(var i in n)i in e?e[i].push(t):e[i]=[t]},t.Index.prototype.coordNorm=function(e,t,n){for(var i in e)if(i in t){var r=t[i].length;e[i]=e[i]*r/n}return e},t.Index.prototype.toJSON=function(){var e={};return this._fields.forEach(function(t){e[t]=this.index[t].toJSON()},this),{version:t.version,fields:this._fields,ref:this._ref,documentStore:this.documentStore.toJSON(),index:e,pipeline:this.pipeline.toJSON()}},t.Index.prototype.use=function(e){var t=Array.prototype.slice.call(arguments,1);t.unshift(this),e.apply(this,t)},t.DocumentStore=function(e){this._save=null===e||void 0===e?!0:e,this.docs={},this.docInfo={},this.length=0},t.DocumentStore.load=function(e){var t=new this;return t.length=e.length,t.docs=e.docs,t.docInfo=e.docInfo,t._save=e.save,t},t.DocumentStore.prototype.isDocStored=function(){return this._save},t.DocumentStore.prototype.addDoc=function(t,n){this.hasDoc(t)||this.length++,this.docs[t]=this._save===!0?e(n):null},t.DocumentStore.prototype.getDoc=function(e){return this.hasDoc(e)===!1?null:this.docs[e]},t.DocumentStore.prototype.hasDoc=function(e){return e in this.docs},t.DocumentStore.prototype.removeDoc=function(e){this.hasDoc(e)&&(delete this.docs[e],delete this.docInfo[e],this.length--)},t.DocumentStore.prototype.addFieldLength=function(e,t,n){null!==e&&void 0!==e&&0!=this.hasDoc(e)&&(this.docInfo[e]||(this.docInfo[e]={}),this.docInfo[e][t]=n)},t.DocumentStore.prototype.updateFieldLength=function(e,t,n){null!==e&&void 0!==e&&0!=this.hasDoc(e)&&this.addFieldLength(e,t,n)},t.DocumentStore.prototype.getFieldLength=function(e,t){return null===e||void 0===e?0:e in this.docs&&t in this.docInfo[e]?this.docInfo[e][t]:0},t.DocumentStore.prototype.toJSON=function(){return{docs:this.docs,docInfo:this.docInfo,length:this.length,save:this._save}},t.stemmer=function(){function e(e){e=e.replace(/([aeiouyäöü])u([aeiouyäöü])/g,"$1U$2"),e=e.replace(/([aeiouyäöü])y([aeiouyäöü])/g,"$1Y$2"),e=e.replace(/ß/g,"ss");var t=e.search(/[aeiouyäöü][^aeiouyäöü]/),n="";-1!=t&&(t+=2,n=e.substring(t));var i=-1,r="";-1!=t&&(i=n.search(/[aeiouyäöü][^aeiouyäöü]/),-1!=i?(i+=2,r=n.substring(i),i+=t):r=""),-1!=t&&3>t&&(t=3,n=e.substring(t));var o=e.search(/(em|ern|er)$/g),s=e.search(/(e|en|es)$/g),d=e.search(/([bdfghklmnrt]s)$/g);-1!=d&&d++;var u=1e4,a="";-1!=o&&u>o&&(a="a",u=o),-1!=s&&u>s&&(a="b",u=s),-1!=d&&u>d&&(a="c",u=d),1e4!=u&&-1!=t&&u>=t&&(e=e.substring(0,u),"b"==a&&-1!=e.search(/niss$/)&&(e=e.substring(0,e.length-1)));var c=e.search(/(en|er|est)$/g),l=e.search(/(.{3}[bdfghklmnt]st)$/g);-1!=l&&(l+=4);var h=1e4,f="";-1!=c&&h>c&&(f="a",h=c),-1!=l&&h>l&&(f="b",h=l),1e4!=h&&-1!=t&&h>=t&&(e=e.substring(0,h));var p=e.search(/(end|ung)$/g),v=e.search(/[^e](ig|ik|isch)$/g),g=e.search(/(lich|heit)$/g),m=e.search(/(keit)$/g);-1!=v&&v++;var y=1e4,w="";if(-1!=p&&y>p&&(w="a",y=p),-1!=v&&y>v&&(w="b",y=v),-1!=g&&y>g&&(w="c",y=g),-1!=m&&y>m&&(w="d",y=m),1e4!=y&&-1!=i&&y>=i){e=e.substring(0,y);var x=-1;"a"==w?(x=e.search(/[^e](ig)$/),-1!=x&&(x++,x>=i&&(e=e.substring(0,x)))):"c"==w?(x=e.search(/(er|en)$/),-1!=x&&x>=t&&(e=e.substring(0,x))):"d"==w&&(x=e.search(/(lich|ig)$/),-1!=x&&x>=i&&(e=e.substring(0,x)))}return e=e.replace(/U/g,"u"),e=e.replace(/Y/g,"y"),e=e.replace(/ä/g,"a"),e=e.replace(/ö/g,"o"),e=e.replace(/ü/g,"u")}return e}(),t.Pipeline.registerFunction(t.stemmer,"stemmer"),t.stopWordFilter=function(e){return e&&t.stopWordFilter.stopWords[e]!==!0?e:void 0},t.clearStopWords=function(){t.stopWordFilter.stopWords={}},t.addStopWords=function(e){null!=e&&Array.isArray(e)!==!1&&e.forEach(function(e){t.stopWordFilter.stopWords[e]=!0},this)},t.resetStopWords=function(){t.stopWordFilter.stopWords=t.defaultStopWords},t.defaultStopWords={"":!0,aber:!0,alle:!0,allem:!0,allen:!0,aller:!0,alles:!0,als:!0,also:!0,am:!0,an:!0,ander:!0,andere:!0,anderem:!0,anderen:!0,anderer:!0,anderes:!0,anderm:!0,andern:!0,anderr:!0,anders:!0,auch:!0,auf:!0,aus:!0,bei:!0,bin:!0,bis:!0,bist:!0,da:!0,damit:!0,dann:!0,der:!0,den:!0,des:!0,dem:!0,die:!0,das:!0,daß:!0,derselbe:!0,derselben:!0,denselben:!0,desselben:!0,demselben:!0,dieselbe:!0,dieselben:!0,dasselbe:!0,dazu:!0,dein:!0,deine:!0,deinem:!0,deinen:!0,deiner:!0,deines:!0,denn:!0,derer:!0,dessen:!0,dich:!0,dir:!0,du:!0,dies:!0,diese:!0,diesem:!0,diesen:!0,dieser:!0,dieses:!0,doch:!0,dort:!0,durch:!0,ein:!0,eine:!0,einem:!0,einen:!0,einer:!0,eines:!0,einig:!0,einige:!0,einigem:!0,einigen:!0,einiger:!0,einiges:!0,einmal:!0,er:!0,ihn:!0,ihm:!0,es:!0,etwas:!0,euer:!0,eure:!0,eurem:!0,euren:!0,eurer:!0,eures:!0,für:!0,gegen:!0,gewesen:!0,hab:!0,habe:!0,haben:!0,hat:!0,hatte:!0,hatten:!0,hier:!0,hin:!0,hinter:!0,ich:!0,mich:!0,mir:!0,ihr:!0,ihre:!0,ihrem:!0,ihren:!0,ihrer:!0,ihres:!0,euch:!0,im:!0,"in":!0,indem:!0,ins:!0,ist:!0,jede:!0,jedem:!0,jeden:!0,jeder:!0,jedes:!0,jene:!0,jenem:!0,jenen:!0,jener:!0,jenes:!0,jetzt:!0,kann:!0,kein:!0,keine:!0,keinem:!0,keinen:!0,keiner:!0,keines:!0,können:!0,könnte:!0,machen:!0,man:!0,manche:!0,manchem:!0,manchen:!0,mancher:!0,manches:!0,mein:!0,meine:!0,meinem:!0,meinen:!0,meiner:!0,meines:!0,mit:!0,muss:!0,musste:!0,nach:!0,nicht:!0,nichts:!0,noch:!0,nun:!0,nur:!0,ob:!0,oder:!0,ohne:!0,sehr:!0,sein:!0,seine:!0,seinem:!0,seinen:!0,seiner:!0,seines:!0,selbst:!0,sich:!0,sie:!0,ihnen:!0,sind:!0,so:!0,solche:!0,solchem:!0,solchen:!0,solcher:!0,solches:!0,soll:!0,sollte:!0,sondern:!0,sonst:!0,über:!0,um:!0,und:!0,uns:!0,unse:!0,unsem:!0,unsen:!0,unser:!0,unses:!0,unter:!0,viel:!0,vom:!0,von:!0,vor:!0,während:!0,war:!0,waren:!0,warst:!0,was:!0,weg:!0,weil:!0,weiter:!0,welche:!0,welchem:!0,welchen:!0,welcher:!0,welches:!0,wenn:!0,werde:!0,werden:!0,wie:!0,wieder:!0,will:!0,wir:!0,wird:!0,wirst:!0,wo:!0,wollen:!0,wollte:!0,würde:!0,würden:!0,zu:!0,zum:!0,zur:!0,zwar:!0,zwischen:!0},t.stopWordFilter.stopWords=t.defaultStopWords,t.Pipeline.registerFunction(t.stopWordFilter,"stopWordFilter"),t.trimmer=function(e){if(null===e||void 0===e)throw new Error("token should not be undefined");return e.replace(/^\W+/,"").replace(/\W+$/,"")},t.Pipeline.registerFunction(t.trimmer,"trimmer"),t.InvertedIndex=function(){this.root={docs:{},df:0}},t.InvertedIndex.load=function(e){var t=new this;return t.root=e.root,t},t.InvertedIndex.prototype.addToken=function(e,t,n){for(var n=n||this.root,i=0;i<=e.length-1;){var r=e[i];r in n||(n[r]={docs:{},df:0}),i+=1,n=n[r]}var o=t.ref;n.docs[o]?n.docs[o]={tf:t.tf}:(n.docs[o]={tf:t.tf},n.df+=1)},t.InvertedIndex.prototype.hasToken=function(e){if(!e)return!1;for(var t=this.root,n=0;n<e.length;n++){if(!t[e[n]])return!1;t=t[e[n]]}return!0},t.InvertedIndex.prototype.getNode=function(e){if(!e)return null;for(var t=this.root,n=0;n<e.length;n++){if(!t[e[n]])return null;t=t[e[n]]}return t},t.InvertedIndex.prototype.getDocs=function(e){var t=this.getNode(e);return null==t?{}:t.docs},t.InvertedIndex.prototype.getTermFrequency=function(e,t){var n=this.getNode(e);return null==n?0:t in n.docs?n.docs[t].tf:0},t.InvertedIndex.prototype.getDocFreq=function(e){var t=this.getNode(e);return null==t?0:t.df},t.InvertedIndex.prototype.removeToken=function(e,t){if(e){var n=this.getNode(e);null!=n&&t in n.docs&&(delete n.docs[t],n.df-=1)}},t.InvertedIndex.prototype.expandToken=function(e,t,n){if(null==e||""==e)return[];var t=t||[];if(void 0==n&&(n=this.getNode(e),null==n))return t;n.df>0&&t.push(e);for(var i in n)"docs"!==i&&"df"!==i&&this.expandToken(e+i,t,n[i]);return t},t.InvertedIndex.prototype.toJSON=function(){return{root:this.root}},t.Configuration=function(e,n){var e=e||"";if(void 0==n||null==n)throw new Error("fields should not be null");this.config={};var i;try{i=JSON.parse(e),this.buildUserConfig(i,n)}catch(r){t.utils.warn("user configuration parse failed, will use default configuration"),this.buildDefaultConfig(n)}},t.Configuration.prototype.buildDefaultConfig=function(e){this.reset(),e.forEach(function(e){this.config[e]={boost:1,bool:"OR",expand:!1}},this)},t.Configuration.prototype.buildUserConfig=function(e,n){var i="OR",r=!1;if(this.reset(),"bool"in e&&(i=e.bool||i),"expand"in e&&(r=e.expand||r),"fields"in e)for(var o in e.fields)if(n.indexOf(o)>-1){var s=e.fields[o],d=r;void 0!=s.expand&&(d=s.expand),this.config[o]={boost:s.boost||1,bool:s.bool||i,expand:d}}else t.utils.warn("field name in user configuration not found in index instance fields");else this.addAllFields2UserConfig(i,r,n)},t.Configuration.prototype.addAllFields2UserConfig=function(e,t,n){n.forEach(function(n){this.config[n]={boost:1,bool:e,expand:t}},this)},t.Configuration.prototype.get=function(){return this.config},t.Configuration.prototype.reset=function(){this.config={}},function(e,t){"function"==typeof define&&define.amd?define(t):"object"==typeof exports?module.exports=t():e.elasticlunr=t()}(this,function(){return t})}();